(()=>{"use strict";class t{constructor(){this.drawing=!1,this.brushWidth=5,this.prevMouseX=null,this.prevMouseY=null,this.snapshot=null,this.selectedTool="brush",this.selectedColor="black"}get isDrawing(){return this.drawing}set isDrawing(t){this.drawing=t}get isSelectedTool(){return this.selectedTool}set isSelectedTool(t){this.selectedTool=t}get mouseX(){return this.prevMouseX}get mouseY(){return this.prevMouseY}set mouseX(t){this.prevMouseX=t}set mouseY(t){this.prevMouseY=t}get snapshotValue(){return this.snapshot}set snapshotValue(t){this.snapshot=t}get brushWidthValue(){return this.brushWidth}set brushWidthValue(t){this.brushWidth=t}get colorValue(){return this.selectedColor}set colorValue(t){this.selectedColor=t}eraserChoosing(){return"eraser"===this.selectedTool}}class e{constructor(){this.canvas=document.querySelector("canvas"),this.ctx=this.canvas.getContext("2d"),this.toolBtns=document.querySelectorAll(".tool"),this.activeOption=document.querySelector(".options .active"),this.fillColor=document.querySelector("#fill-color"),this.sizeSlider=document.querySelector("#size-slider"),this.colorBtns=document.querySelectorAll(".colors .option"),this.activeColorBtn=document.querySelector(".colors .selected"),this.colorPicker=document.querySelector("#colored-picker"),this.clearCanvas=document.querySelector(".clear-canvas"),window.addEventListener("load",(()=>{this.canvas.width=this.canvas.offsetWidth,this.canvas.height=this.canvas.offsetHeight}))}changeLineWith(t){this.ctx.lineWidth=t}getSnapshot(){return this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)}putSnapshot(t){this.ctx.putImageData(t,0,0)}drawRect(t,e,i){this.fillColor.checked?this.ctx.fillRect(t.offsetX,t.offsetY,e-t.offsetX,i-t.offsetY):this.ctx.strokeRect(t.offsetX,t.offsetY,e-t.offsetX,i-t.offsetY)}drawCircle(t,e,i){this.ctx.beginPath();let s=Math.sqrt(Math.pow(e-t.offsetX,2)+Math.pow(i-t.offsetY,2));this.ctx.arc(e,i,s,0,2*Math.PI),this.fillColor.checked?this.ctx.fill():this.ctx.stroke()}drawTriangle(t,e,i){this.ctx.beginPath(),this.ctx.moveTo(e,i),this.ctx.lineTo(t.offsetX,t.offsetY),this.ctx.lineTo(2*e-t.offsetX,t.offsetY),this.ctx.closePath(),this.fillColor.checked?this.ctx.fill():this.ctx.stroke()}listeningStartDrawing(t){this.canvas.addEventListener("mousedown",(e=>{t(e),this.ctx.beginPath()}))}listeningDrawing(t){this.canvas.addEventListener("mousemove",t)}listeningStopDrawing(t){this.canvas.addEventListener("mouseup",t)}listeningToolBar(t){this.toolBtns.forEach((e=>e.addEventListener("click",(i=>{this.activeOption.classList.remove("active"),e.classList.add("active"),this.activeOption=e,t(i)}))))}listeningChangeSize(t){this.sizeSlider.addEventListener("change",(e=>t(e)))}listeningChangeColor(t){this.colorBtns.forEach((e=>e.addEventListener("click",(i=>{this.activeColorBtn.classList.remove("selected"),e.classList.add("selected"),this.activeColorBtn=e,t(i)}))))}listeningChangeColorPicker(t){this.colorPicker.addEventListener("change",(()=>{this.colorPicker.parentElement.style.background=this.colorPicker.value,this.colorPicker.parentElement.click(),t(this.colorPicker.value)}))}listeningClearCanvas(t){this.clearCanvas.addEventListener("click",(()=>this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)))}}class i{constructor(t,e){this.model=t,this.view=e}init(){this.view.listeningStartDrawing(this.startDraw.bind(this)),this.view.listeningDrawing(this.drawing.bind(this)),this.view.listeningStopDrawing(this.stopDraw.bind(this)),this.view.listeningToolBar(this.choisingToolbar.bind(this)),this.view.listeningChangeSize(this.changeSize.bind(this)),this.view.listeningChangeColor(this.changeColor.bind(this)),this.view.listeningChangeColorPicker(this.changeColorPicker.bind(this)),this.view.listeningClearCanvas()}startDraw(t){this.model.isDrawing=!0,this.model.mouseX=t.offsetX,this.model.mouseY=t.offsetY,this.view.changeLineWith(this.model.brushWidth),this.model.snapshotValue=this.view.getSnapshot(),"eraser"===this.model.isSelectedTool&&(this.model.colorValue="white"),this.view.ctx.fillStyle=this.model.colorValue,this.view.ctx.strokeStyle=this.model.colorValue}drawing(t){this.model.isDrawing&&(this.view.putSnapshot(this.model.snapshotValue),"brush"===this.model.isSelectedTool||"eraser"===this.model.isSelectedTool?(this.view.ctx.lineTo(t.offsetX,t.offsetY),this.view.ctx.stroke()):"rectangle"===this.model.isSelectedTool?this.view.drawRect(t,this.model.mouseX,this.model.mouseY):"circle"===this.model.isSelectedTool?this.view.drawCircle(t,this.model.mouseX,this.model.mouseY):this.view.drawTriangle(t,this.model.mouseX,this.model.mouseY))}stopDraw(){this.model.isDrawing=!1}choisingToolbar(t){this.model.isSelectedTool=t.target.id}changeSize(t){this.model.brushWidthValue=t.target.value}changeColor(t){const e=window.getComputedStyle(t.target).getPropertyValue("background-color");this.model.colorValue=e}changeColorPicker(t){this.model.colorValue=t}}var s=document.getElementById("brush-img"),o=document.getElementById("eraser-img"),c=document.getElementById("circle-img"),l=document.getElementById("rectangle-img"),M=document.getElementById("triangle-img");s.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNC40NDUiIGhlaWdodD0iMTQuNDYyIiB2aWV3Qm94PSIwIDAgMTQuNDQ1IDE0LjQ2MiI+DQogIDxwYXRoIGlkPSJQYXRoXzE1MyIgZGF0YS1uYW1lPSJQYXRoIDE1MyIgZD0iTTguMzE5LDguMzc4bDYuMDE0LTYuNTM1YS40LjQsMCwwLDAtLjAyNC0uNTc3TDEzLjE1NS4xMTFhLjQuNCwwLDAsMC0uNTUzLDBMNi4wNjYsNi4xMjVhLjQuNCwwLDAsMCwwLC41NzdMNy43NDIsOC4zNzhhLjQuNCwwLDAsMCwuNTc3LDBabS0zLjQ0LS44OSwyLjA5MywyLjFhLjguOCwwLDAsMSwuMjQ5LjQ1N3YuMzkzYTMuMjA4LDMuMjA4LDAsMCwxLS45MzgsMi4yNzcsNi4yMjMsNi4yMjMsMCwwLDEtNC43MzksMS43MzIsMi4zMjYsMi4zMjYsMCwwLDEtMS40MjctLjQ4MS40LjQsMCwwLDEtLjA0OC0uNTA1LDQuNzcyLDQuNzcyLDAsMCwwLC43MTQtMi42MDlBMy42MjYsMy42MjYsMCwwLDEsMS43NDQsOC4xN2EzLjIwOCwzLjIwOCwwLDAsMSwyLjI2OS0uOTM4LDMuMTM0LDMuMTM0LDAsMCwxLC4zOTMsMEEuODc0Ljg3NCwwLDAsMSw0Ljg3OSw3LjQ4OFoiIGZpbGw9IiM1YTYxNjgiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPg0KPC9zdmc+DQo=",o.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNy4wOTMiIGhlaWdodD0iMTYuMzAxIiB2aWV3Qm94PSIwIDAgMTcuMDkzIDE2LjMwMSI+DQogIDxwYXRoIGlkPSJieC1lcmFzZXIiIGQ9Ik0yLjU0MywxNC40NmwzLjk4NSwzLjk4NWEuOTIzLjkyMywwLDAsMCwuNjU1LjI3MkgxOC4zMDlWMTYuODYyaC02LjQ1bDYuNjk1LTYuNjk1YTEuODU1LDEuODU1LDAsMCwwLDAtMi42MjJsLTQuNTktNC41ODlhMS44NTcsMS44NTcsMCwwLDAtMi42MjIsMGwtNC40LDQuNEwyLjUzMiwxMS44NDlhMS44NiwxLjg2LDAsMCwwLC4wMTEsMi42MVpNMTIuNjUzLDQuMjY4bDQuNTg5LDQuNTg5LTIuNCwyLjRMMTAuMjU2LDYuNjY1bDIuNC0yLjRabS00LjQsNC40LjY4OS0uNjg4LDQuNTg5LDQuNTg5TDkuMzEsMTYuNzg5YS45NTEuOTUxLDAsMCwwLS4wNjQuMDczSDcuNTY4TDMuODU1LDEzLjE0OGw0LjQtNC40ODRaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMi4wMDMgLTIuNDE2KSIgZmlsbD0iIzVhNjE2OCIvPg0KPC9zdmc+DQo=",c.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNi4zMDEiIGhlaWdodD0iMTYuMzAxIiB2aWV3Qm94PSIwIDAgMTYuMzAxIDE2LjMwMSI+DQogIDxwYXRoIGlkPSJjaXJjbGUtcmVndWxhciIgZD0iTTE2LjMsOC4xNUE4LjE1LDguMTUsMCwxLDEsOC4xNSwwLDguMTUsOC4xNSwwLDAsMSwxNi4zLDguMTVaTTguMTUsMS41MjhBNi42MjIsNi42MjIsMCwxLDAsMTQuNzczLDguMTUsNi42MjEsNi42MjEsMCwwLDAsOC4xNSwxLjUyOFoiIGZpbGw9IiM1YTYxNjgiLz4NCjwvc3ZnPg0K",l.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNi4zMDEiIGhlaWdodD0iMTYuMzAxIiB2aWV3Qm94PSIwIDAgMTYuMzAxIDE2LjMwMSI+DQogIDxwYXRoIGlkPSJzcXVhcmUtcmVndWxhciIgZD0iTTEzLjk3MiwzMkEyLjMzLDIuMzMsMCwwLDEsMTYuMywzNC4zMjlWNDUuOTcyQTIuMzMxLDIuMzMxLDAsMCwxLDEzLjk3Miw0OC4zSDIuMzI5QTIuMzMsMi4zMywwLDAsMSwwLDQ1Ljk3MlYzNC4zMjlBMi4zMjksMi4zMjksMCwwLDEsMi4zMjksMzJabTAsMS43NDdIMi4zMjlhLjU4Mi41ODIsMCwwLDAtLjU4Mi41ODJWNDUuOTcyYS41ODMuNTgzLDAsMCwwLC41ODIuNTgySDEzLjk3MmEuNTg0LjU4NCwwLDAsMCwuNTgyLS41ODJWMzQuMzI5QS41ODMuNTgzLDAsMCwwLDEzLjk3MiwzMy43NDdaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC0zMikiIGZpbGw9IiM1YTYxNjgiLz4NCjwvc3ZnPg0K",M.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNy44NzQiIGhlaWdodD0iMTUuNzExIiB2aWV3Qm94PSIwIDAgMTcuODc0IDE1LjcxMSI+DQogIDxwYXRoIGlkPSJ0cmlhbmdsZSIgZD0iTTE5Ljc1LDE3LjU3NCwxMS43MSwzLjY1NmEuODkzLjg5MywwLDAsMC0xLjU1NCwwTDIuMTE2LDE3LjU3NGEuODkzLjg5MywwLDAsMCwuNzc3LDEuMzRoMTYuMDhhLjg5My44OTMsMCwwLDAsLjc3Ny0xLjM0Wk00LjQzOCwxNy4xMjcsMTAuOTMzLDUuODg5bDYuNDk1LDExLjIzOFoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xLjk5NiAtMy4yMDMpIiBmaWxsPSIjNWE2MTY4Ii8+DQo8L3N2Zz4NCg==",window.addEventListener("DOMContentLoaded",(function(){const s=new t,o=new e;new i(s,o).init()}))})();